<div class="data-table-wrapper">
  <div #tableContainer class="table-container">
    <table class="data-table">
      <thead>
        <tr>
          @for (column of columns; track column.key) {
            <th>{{ column.label }}</th>
          }
          @if (rowActionsTemplate) {
            <th>Actions</th>
          }
        </tr>
      </thead>
      <tbody>
        @for (row of paginatedData; track row; let i = $index) {
          <tr [class.even]="i % 2 === 0">
            @for (column of columns; track column.key) {
              <td>
                @if (column.type === 'status') {
                  <span [class]="'status-badge ' + getStatusClass(row[column.key])">
                    {{ row[column.key] }}
                  </span>
                } @else {
                  {{ formatValue(row[column.key], column.type) }}
                }
              </td>
            }
            @if (rowActionsTemplate) {
              <td class="actions-cell">
                <ng-container *ngTemplateOutlet="rowActionsTemplate; context: { $implicit: row }"></ng-container>
              </td>
            }
          </tr>
        }
        @if (paginatedData.length === 0) {
          <tr>
            <td [attr.colspan]="columns.length + (rowActionsTemplate ? 1 : 0)" class="no-data">
              No data available
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>

  @if (data.length > pageSize) {
    <div class="pagination">
      <button
        class="pagination-button"
        (click)="prevPage()"
        [disabled]="currentPage === 1"
      >
        ← Previous
      </button>

      <span class="pagination-info">
        Page {{ currentPage }} of {{ totalPages }}
      </span>

      <button
        class="pagination-button"
        (click)="nextPage()"
        [disabled]="currentPage === totalPages"
      >
        Next →
      </button>
    </div>
  }
</div>
