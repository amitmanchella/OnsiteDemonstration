<div class="loan-application-page">
  <div class="page-header">
    <h2>New Loan Application</h2>
    <a routerLink="/loans" class="back-link">‚Üê Cancel</a>
  </div>

  <form [formGroup]="applicationForm" (ngSubmit)="onSubmit()" class="application-form">
    <div class="error-message" *ngIf="errorMessage">
      {{ errorMessage }}
    </div>

    <div class="form-section">
      <h3>Applicant Information</h3>
      <div class="form-group">
        <label>Applicant Name *</label>
        <input type="text" formControlName="applicantName" placeholder="Full name" />
        <div class="validation-error" *ngIf="f['applicantName'].invalid && f['applicantName'].touched">
          Name is required (min 2 characters)
        </div>
      </div>
    </div>

    <div class="form-section">
      <h3>Loan Details</h3>
      <div class="form-row">
        <div class="form-group">
          <label>Loan Amount *</label>
          <input type="number" formControlName="amount" placeholder="e.g. 50000" />
          <div class="validation-error" *ngIf="f['amount'].invalid && f['amount'].touched">
            Amount required ($1,000 - $10,000,000)
          </div>
        </div>

        <div class="form-group">
          <label>Interest Rate (%) *</label>
          <input type="number" step="0.01" formControlName="interestRate" placeholder="e.g. 5.5" />
          <div class="validation-error" *ngIf="f['interestRate'].invalid && f['interestRate'].touched">
            Rate required (0% - 30%)
          </div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Term (months) *</label>
          <input type="number" formControlName="term" placeholder="e.g. 36" />
          <div class="validation-error" *ngIf="f['term'].invalid && f['term'].touched">
            Term required (6 - 360 months)
          </div>
        </div>

        <div class="form-group">
          <label>Loan Type *</label>
          <select formControlName="type">
            <option value="">Select type</option>
            <option *ngFor="let type of loanTypes" [value]="type.value">{{ type.label }}</option>
          </select>
          <div class="validation-error" *ngIf="f['type'].invalid && f['type'].touched">
            Type is required
          </div>
        </div>
      </div>
    </div>

    <div class="form-section">
      <h3>Risk Assessment</h3>
      <div class="form-group">
        <label>Risk Score (0-100) *</label>
        <input type="number" formControlName="riskScore" placeholder="50" />
        <div class="validation-error" *ngIf="f['riskScore'].invalid && f['riskScore'].touched">
          Score required (0 - 100)
        </div>
      </div>
    </div>

    <div class="form-actions">
      <button type="button" class="btn-secondary" routerLink="/loans">Cancel</button>
      <button type="submit" class="btn-primary" [disabled]="loading || applicationForm.invalid">
        {{ loading ? 'Submitting...' : 'Submit Application' }}
      </button>
    </div>
  </form>
</div>
