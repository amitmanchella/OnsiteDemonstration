<div class="recent-activity-widget">
  <h3>Recent Activity</h3>

  @if (loading) {
    <div class="loading">Loading...</div>
  }

  @if (error) {
    <div class="error">{{ error }}</div>
  }

  @if (!loading && !error) {
    <ul class="activity-list">
      @for (transaction of recentTransactions$ | async; track transaction.id) {
        <li class="activity-item">
          <div class="activity-type" [class]="'type-' + transaction.type">
            {{ transaction.type }}
          </div>
          <div class="activity-details">
            <div class="activity-description">{{ transaction.description }}</div>
            <div class="activity-date">{{ transaction.date | date:'mediumDate' }}</div>
          </div>
          <div class="activity-amount" [class.negative]="transaction.type === 'payment'">
            {{ transaction.type === 'payment' ? '-' : '+' }}{{ transaction.amount | currencyFormat }}
          </div>
        </li>
      }
    </ul>

    @if (!(recentTransactions$ | async)?.length) {
      <div class="empty-state">No recent activity</div>
    }
  }
</div>
